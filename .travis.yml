sudo: false

notifications:
  email: false

os:
- linux
- osx

env:
  - ARCH=x86_64
  - ARCH=i686

matrix:
  exclude:
    - os: osx
      env: ARCH=i686

script:
  - set -e
  - chmod 777 install.sh
  - 'if [ "$ARCH" = "i686" ]; then
    docker run -i -v "${PWD}:/MyProgram" i386/ubuntu:16.04 /bin/bash -c "linux32 --32bit i386 apt update; apt install -y wget build-essential /MyProgram/install.sh";
    travis_terminate 0;
    fi'
  - ./install.sh
  - . Sming/setenv.sh
  - cd $SMING_HOME
  - make test
